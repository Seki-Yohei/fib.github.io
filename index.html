<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>getの利用</title>
  <script type="text/javascript" method="GET" src="Fibonacci.js"></script>
</head>
<body>
<p>getメソッドでurlの末尾に「?n=なんかの数字」を足してフィボナッチ数列のn番目を見てみよう</p>
<p id="f"></p>
  
</body>
<script type="text/javascript">
  // 既に計算したものを保存する辞書
  const already = {};
  // fibonacci関数で調べたものをfibとする
  var fib = fibonacci(get_num());
  // fibが規格外の大きさになった場合には
  if (fib == "Infinity")
  {
    // エラーを記載
    const json = {
      "status":416,
      "message":"Range Not Satisfiable"
    };
    const ans = JSON.stringify(json);
    document.getElementById("f").textContent = ans;
  }
  // fibが正しい形ならば
  else if (get_num()>0)
  {
    // 結果を記載
    const json = {"result":fib};
    const ans = JSON.stringify(json);
    document.getElementById("f").textContent = ans;
  }
  // fibが間違った形ならば
  else
  {
    // エラーを記載
    const json = {
      "status":400,
      "message":"Bad request.",
    }
    const ans = JSON.stringify(json);
    document.getElementById("f").textContent = ans;
  }
</script>
</html>
